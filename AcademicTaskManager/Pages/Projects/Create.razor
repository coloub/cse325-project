@page "/projects/create"
@using AcademicTaskManager.Data
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.EntityFrameworkCore
@using System.Linq
@using AcademicTaskManager.Models
@inject ApplicationDbContext Db
@inject NavigationManager Nav

<h3>Crear Proyecto</h3>

<EditForm Model="project" OnValidSubmit="CreateProject">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="mb-3">
        <label>Nombre</label>
        <InputText class="form-control" @bind-value="project.Name" />
    </div>
    <div class="mb-3">
        <label>Descripci√≥n</label>
        <InputTextArea class="form-control" @bind-value="project.Description" />
    </div>
    <button class="btn btn-primary" type="submit">Crear</button>
    <a class="btn btn-secondary ms-2" href="/projects">Cancelar</a>
</EditForm>

@code {
    private Project project = new();

    private async Task CreateProject()
    {
        Db.Projects.Add(project);
        await Db.SaveChangesAsync();
        Nav.NavigateTo("/projects");
    }
}